<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="cer-participantes-triagem.html">
<link rel="import" href="cer-participantes-matriculados.html">
<link rel="import" href="cer-styles.html">

<dom-module id="cer-participantes">
  <template>
    <style include="cer-page-styles">
      :host {
        padding: 0;
        display: block;
      }

      paper-tabs {
        width: 100%;
        background-color: var(--paper-blue-grey-500);
        color: white;
        --paper-tabs-selection-bar-color: white;
      }

      paper-tab {
        --paper-tab-ink: white;
      }
    </style>

    <paper-fab icon="add" elevation="5" on-click="_novaFichaDeTriagem"></paper-fab>

    <paper-tabs selected="{{selectedTab}}">
      <paper-tab>Fila de espera</paper-tab>
      <paper-tab>Matriculados</paper-tab>
    </paper-tabs>

    <iron-pages selected="[[selectedTab]]">
      <cer-participantes-triagem id="triagem" on-matricular="_matricular"></cer-participantes-triagem>
      <cer-participantes-matriculados id="matriculados"></cer-participantes-matriculados>
    </iron-pages>
  </template>

  <script type="module">
    import { createDataProvider } from './utils.js';

    class PaticipantesPage extends Polymer.Element {
      static get is() { return 'cer-participantes'; }

      static get properties() {
        return {
          selectedTab: { type: Number, value: 0 },
        }
      }

      ready() {
        super.ready();
      }

      _novaFichaDeTriagem() {
        this.$.triagem._openDialog({});
      }

      _matricular(e) {
        this.$.triagem._closeDialog();
        this.$.matriculados._openDialog(e.detail.participante);
      }
    }

    window.customElements.define(PaticipantesPage.is, PaticipantesPage);
  </script>
</dom-module>
